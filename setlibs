#! /bin/bash
#
# michael cousins
# http://www.github.com/mcous/kicad-lib
# this script file released into the public domain

# setlibs: adds or replaces the libraries of a kicad project using the libraries from github.com/mcous/kicad-lib
#   usage: setlibs [flags] /path/to/project.pro
#   flags: 
# TODO:     -a, --append      = append libraries rather than replacing them
# TODO:     -b, --before      = if appending, append new libraries before old ones (does not apply to power library)
#     -c, --components  = only do component files
#     -f, --footprints  = only do footprint files
#     -h, --help        = display this little summary
# TODO:    -v, --version     = display version number of the library

# parse input
# TODO
if [ $1 ]
  then
  run
else
  help
fi

# program
function run() {
# get list of component libraries from kicad-lib/components
# DEBUG - echo list
# TODO

# get list of footprint libraries from kicad-lib/footprints
# DEBUG - echo list
# TODO

# insert path to components into project file
# TODO

# insert path to footprints into project file
# TODO

# delete old component libraries in project file
# TODO

# delete old footprint libraries in project file
# TODO

# insert component libraries into project file
# TODO

# insert footprint libraries into project file
# TODO
}

# help function
function help() {
  echo "setlibs: adds or replaces the libraries of a kicad project using the libraries from github.com/mcous/kicad-lib";
  echo "  usage: setlibs [flags] /path/to/project.pro";
  echo "  flags: ";
  echo "TODO:     -a, --append      = append libraries rather than replacing them";
  echo "TODO:     -b, --before      = if appending, append new libraries before old ones (does not apply to power library)";
  echo "    -c, --components  = only do component files";
  echo "    -f, --footprints  = only do footprint files";
  echo "    -h, --help        = display this little summary";
  echo "TODO:    -v, --version     = display version number of the library";
}